<script context="module"></script>

<script>import LangTag from "./LangTag.svelte";
export let code;
export let langtag = false;
import hljs from "highlight.js";
import { createEventDispatcher, afterUpdate } from "svelte";
const dispatch = createEventDispatcher();
let highlighted = "";
let language = void 0;
afterUpdate(() => {
  if (highlighted)
    dispatch("highlight", { highlighted, language });
});
$:
  ({ value: highlighted, language } = hljs.highlightAuto(code));
</script>

<slot {highlighted}>
  <LangTag
    {...$$restProps}
    languageName={language}
    {langtag}
    {highlighted}
    {code}
  />
</slot>
